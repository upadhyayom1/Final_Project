<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Civic Connect | Student Portal (Demo)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link
        href="https://fonts.googleapis.com/css2?family=Special+Elite&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --paper-bg: #f4ecd8;
            --paper-card: #fffdf5;
            --ink-color: #3e2723;
            --accent-brown: #5d4037;
            --highlight: #d7ccc8;
            --shadow-hard: 4px 4px 0px rgba(62, 39, 35, 0.3);
            --stamp-blue: #1a237e;
            --stamp-red: #b71c1c;
        }

        body {
            font-family: 'Special Elite', monospace !important;
            background-color: var(--paper-bg) !important;
            background-image: url("https://www.transparenttextures.com/patterns/natural-paper.png");
            color: var(--ink-color) !important;
            transition: background 0.3s, color 0.3s;
        }

        h1,
        h2,
        h3,
        .text-xl,
        .text-2xl,
        .text-3xl {
            font-family: 'Playfair Display', serif !important;
            color: var(--ink-color) !important;
            font-weight: 700 !important;
        }

        h1 {
            font-size: 1.45rem !important;
            margin-bottom: 0.3rem !important;
        }

        h2 {
            font-size: 1.8rem !important;
            margin-bottom: 1.4rem !important;
        }

        h3 {
            font-size: 1.45rem !important;
            margin-bottom: 1rem !important;
        }

        aside {
            background-color: var(--accent-brown) !important;
            border-right: 3px double #2c1e1a !important;
            background-image: url("https://www.transparenttextures.com/patterns/black-felt.png");
            box-shadow: inset -6px 0 12px rgba(0, 0, 0, 0.35);
        }

        aside nav {
            padding: 1.25rem !important;
        }

        .nav-link {
            font-size: 0.96rem !important;
            padding: 0.9rem 1.15rem !important;
            border-radius: 1.1rem !important;
            margin-bottom: 0.4rem !important;
            transition: all 0.22s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.09) !important;
            transform: translateX(5px);
            border-radius: 1.2rem !important;
        }

        .nav-link.active {
            background-color: var(--paper-bg) !important;
            color: var(--ink-color) !important;
            border-radius: 1.2rem !important;
            box-shadow: 3px 3px 0 #000, inset 0 1px 3px rgba(0, 0, 0, 0.12) !important;
            transform: translateX(3px);
        }

        .nav-icon {
            width: 1.4rem;
            height: 1.4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .civic-title {
            color: var(--paper-bg);
        }

        header {
            padding: 0.75rem 2.5rem !important;
            height: 72px !important;
            background-color: rgba(244, 236, 216, 0.97) !important;
            border-bottom: 2px solid var(--accent-brown) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 3px 12px rgba(62, 39, 35, 0.15);
        }

        #header-title {
            font-size: 1.55rem !important;
            letter-spacing: -0.025em;
        }

        button,
        [class*="rounded-"] {
            border-radius: 1.25rem !important;
        }

        button.bg-slate-900,
        button.bg-blue-600,
        #btn-submit-report,
        #btn-save-profile {
            border-radius: 1.4rem !important;
            padding: 1rem 1.5rem !important;
            font-size: 0.98rem !important;
        }

        input,
        select,
        textarea {
            border-radius: 1.1rem !important;
            padding: 1rem 1.25rem !important;
        }

        main .bg-white,
        main .rounded-\[2rem\],
        main .rounded-\[3rem\] {
            border-radius: 1.8rem !important;
        }

        #header-avatar {
            width: 46px !important;
            height: 46px !important;
            border-radius: 1.1rem !important;
        }

        .avatar-badge-mini,
        #header-badge {
            font-size: 0.78rem !important;
            padding: 3px 9px !important;
            border-radius: 0.65rem !important;
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        #map {
            width: 100%;
            height: 100%;
            min-height: 400px;
        }

        /* ‚îÄ‚îÄ‚îÄ FIXED QUICK REPORT ‚îÄ‚îÄ‚îÄ */
        #quick-report-section {
            display: flex;
            flex-direction: column;
            height: 100%;
            max-height: 100%;
            overflow: hidden;
            background: white;
            border-radius: 2rem;
            box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }

        #quick-report-inner {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 #f8fafc;
        }

        #quick-report-inner::-webkit-scrollbar {
            width: 6px;
        }

        #quick-report-inner::-webkit-scrollbar-track {
            background: #f8fafc;
            border-radius: 1rem;
        }

        #quick-report-inner::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 1rem;
        }

        #quick-report-section h2 {
            font-size: 1.55rem !important;
            margin-bottom: 1rem !important;
        }

        #quick-report-section label {
            font-size: 0.82rem !important;
        }

        #quick-report-section input,
        #quick-report-section select,
        #quick-report-section textarea {
            padding: 0.8rem 1.1rem !important;
            font-size: 0.92rem !important;
        }

        #quick-report-section textarea {
            min-height: 88px !important;
        }

        #btn-submit-report {
            padding: 0.85rem 1.35rem !important;
            font-size: 0.94rem !important;
        }

        #image-upload-area {
            padding: 1rem !important;
        }

        #image-upload-area i {
            font-size: 2rem !important;
        }

        #image-preview {
            max-height: 72px !important;
        }

        @media (max-width: 1024px) {
            #quick-report-section {
                max-height: 420px;
            }

            #quick-report-inner {
                padding: 1.25rem;
            }
        }

        @media (max-width: 640px) {
            #quick-report-section {
                max-height: 380px;
            }

            #quick-report-inner {
                padding: 1rem;
            }
        }
    </style>
</head>

<body class="bg-slate-50 flex h-screen overflow-hidden text-slate-900">

    <!-- SIDEBAR NAVIGATION -->
    <aside class="w-64 bg-slate-900 text-white flex flex-col hidden md:flex border-r border-slate-800">
        <div class="p-6 text-xl font-black flex items-center gap-3 border-b border-slate-800">
            <div class="bg-blue-500 p-2.5 rounded-xl"
                style="background-color: var(--paper-bg) !important; border: 1px solid #000;">
                <i class="fas fa-landmark text-slate-900 text-sm"></i>
            </div>
            <span class="tracking-tighter civic-title">CivicLedger</span>
        </div>

        <!-- Karma/Points Card -->
        <div class="px-5 pt-5">
            <div class="bg-slate-800 rounded-2xl p-4 border border-slate-700 shadow-lg">
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">CIVIC STANDING</p>
                <div class="flex justify-between items-end">
                    <span class="text-3xl font-black text-yellow-400" id="sidebar-points"
                        style="color: #ffb300 !important; text-shadow: 1px 1px 0 #000;">120</span>
                    <span class="text-xs font-bold text-slate-300 bg-slate-700 px-2 py-1 rounded-lg" id="sidebar-level"
                        style="border: 1px solid #fff;">Scout</span>
                </div>
                <div class="w-full bg-slate-700 h-1 mt-3 rounded-full overflow-hidden" style="border: 1px solid #555;">
                    <div class="bg-yellow-400 h-full w-[45%] transition-all duration-1000" id="sidebar-progress"></div>
                </div>
            </div>
        </div>

        <nav class="flex-1 px-5 py-4 space-y-1.5">
            <button onclick="showPage('dashboard')" id="nav-dashboard"
                class="nav-link active w-full font-semibold text-slate-300">
                <span class="nav-icon"><i class="fas fa-home"></i></span> Dashboard
            </button>
            <button onclick="showPage('feed')" id="nav-feed" class="nav-link w-full font-semibold text-slate-300">
                <span class="nav-icon"><i class="fas fa-stream"></i></span> Campus Feed
            </button>
            <button onclick="showPage('reposts')" id="nav-reposts" class="nav-link w-full font-semibold text-slate-300">
                <span class="nav-icon"><i class="fas fa-retweet"></i></span> My Reposts
            </button>
            <button onclick="showPage('history')" id="nav-history" class="nav-link w-full font-semibold text-slate-300">
                <span class="nav-icon"><i class="fas fa-history"></i></span> My History
            </button>
            <button onclick="showPage('profile')" id="nav-profile" class="nav-link w-full font-semibold text-slate-300">
                <span class="nav-icon"><i class="fas fa-user-circle"></i></span> My Profile
            </button>
        </nav>
    </aside>

    <!-- MAIN CONTENT AREA -->
    <main class="flex-1 overflow-y-auto">

        <header
            class="bg-white/90 backdrop-blur-md border-b border-slate-200 px-6 md:px-10 py-3 flex items-center justify-between sticky top-0 z-50 shadow-sm">
            <div class="flex flex-col">
                <h1 id="header-title" class="font-extrabold tracking-tight text-slate-900 text-xl md:text-2xl">Student
                    Dashboard</h1>
                <p id="header-reg" class="text-xs font-bold uppercase tracking-wider text-[var(--accent-brown)] mt-0.5">
                    2023BTECS00012 ‚Ä¢ STUDENT</p>
            </div>

            <div class="flex items-center gap-4 md:gap-6">
                <div class="relative">
                    <button id="notif-btn" onclick="toggleNotifications()"
                        class="p-2.5 hover:bg-slate-100 rounded-xl transition-all relative group">
                        <i class="fas fa-bell text-slate-600 text-xl" style="color: var(--ink-color) !important;"></i>
                        <span id="notif-dot" class="absolute top-1 right-1 flex h-3 w-3 hidden">
                            <span
                                class="animate-ping-slow absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                            <span
                                class="relative inline-flex rounded-full h-3 w-3 bg-red-500 border-2 border-white"></span>
                        </span>
                    </button>

                    <!-- Keep your dropdown exactly the same -->
                    <div id="notif-menu"
                        class="hidden absolute right-0 mt-3 w-80 bg-white rounded-2xl shadow-2xl border border-slate-100 py-2 z-50 max-h-96 overflow-y-auto">
                        <div class="px-5 py-3 border-b border-slate-50">
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">Recent
                                Updates</span>
                        </div>
                        <div id="notif-list" class="p-2 space-y-1">
                            <p class="text-center text-xs text-slate-400 py-4">No new notifications</p>
                        </div>
                    </div>
                </div>

                <div class="relative">
                    <button id="profile-btn" onclick="toggleProfileMenu()"
                        class="flex items-center gap-3 hover:bg-slate-100 p-1.5 rounded-xl transition-all">
                        <div class="text-right hidden sm:block">
                            <p class="text-sm font-black display-name">Aayush Verma</p>
                        </div>
                        <div class="avatar-container relative">
                            <img id="header-avatar"
                                src="https://ui-avatars.com/api/?name=Aayush+Verma&background=5d4037&color=fff&bold=true&size=128"
                                class="w-11 h-11 rounded-xl shadow border-2 border-white display-avatar object-cover">
                            <div class="avatar-badge-mini absolute -bottom-1 -right-1 bg-yellow-400 text-white text-sm flex items-center justify-center w-6 h-6 rounded-full shadow-md"
                                id="header-badge">ü¶Ö</div>

                        </div>
                    </button>
                    <div id="profile-menu"
                        class="hidden absolute right-0 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-slate-200 py-3 z-50">
                        <button onclick="showPage('profile')"
                            class="w-full flex items-center gap-3 px-6 py-3 text-sm font-bold text-slate-600 hover:bg-blue-50 rounded-xl">
                            <i class="fas fa-user-circle"></i> Edit Profile
                        </button>
                        <button onclick="toggleSettingsModal()"
                            class="w-full flex items-center gap-3 px-6 py-3 text-sm font-bold text-slate-600 hover:bg-blue-50 rounded-xl">
                            <i class="fas fa-cog"></i> Settings
                        </button>
                        <hr class="my-2 border-slate-200" style="border-color: var(--accent-brown);">
                        <button
                            class="w-full flex items-center gap-3 px-6 py-3 text-sm font-bold text-red-500 hover:bg-red-50 rounded-xl">
                            <i class="fas fa-sign-out-alt"></i> Exit Demo
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Page Content -->
        <div class="p-6 md:p-8 max-w-7xl mx-auto">

            <!-- DASHBOARD -->
            <section id="dashboard-page" class="page-section active">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-10 mb-10 lg:h-[450px]">

                    <!-- Quick Report ‚Äì scrollable version -->
                    <div id="quick-report-section">
                        <div id="quick-report-inner">
                            <h2 class="text-2xl font-black mb-4">Quick Report</h2>
                            <form id="complaintForm" class="space-y-4">
                                <div>
                                    <label for="comp-title" class="block text-sm font-medium mb-1.5">Issue Title</label>
                                    <input type="text" id="comp-title" required
                                        placeholder="e.g. Broken Fan in Room 204"
                                        class="w-full px-4 py-2.5 bg-slate-50 border border-slate-300 focus:border-blue-500 rounded-[1.1rem]">
                                </div>

                                <div>
                                    <label for="comp-category" class="block text-sm font-medium mb-1.5">Category</label>
                                    <select id="comp-category"
                                        class="w-full px-4 py-2.5 bg-slate-50 border border-slate-300 rounded-[1.1rem]">
                                        <option>Hostel</option>
                                        <option>Academic</option>
                                        <option>Infrastructure</option>
                                        <option>Cleanliness</option>
                                    </select>
                                </div>

                                <div>
                                    <label for="comp-desc" class="block text-sm font-medium mb-1.5">Description &
                                        Location</label>
                                    <textarea id="comp-desc" required rows="3"
                                        placeholder="Provide details and exact location..."
                                        class="w-full px-4 py-2.5 bg-slate-50 border border-slate-300 rounded-[1.1rem]"></textarea>
                                </div>

                                <div class="flex items-center justify-between bg-transparent p-3 border border-dashed rounded-[1.1rem]"
                                    style="border-color: var(--accent-brown) !important;">
                                    <div>
                                        <span class="text-xs font-bold text-slate-700 block"><i
                                                class="fas fa-lock text-slate-400 mr-1"></i>Private Report?</span>
                                        <span class="text-[10px] text-slate-400">Only visible to Admin & You</span>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="comp-private" class="sr-only peer">
                                        <div
                                            class="w-10 h-5 bg-slate-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-slate-800">
                                        </div>
                                    </label>
                                </div>

                                <div id="image-upload-area"
                                    class="border-2 border-dashed rounded-[1.2rem] py-4 text-center cursor-pointer hover:bg-slate-50 transition"
                                    style="border-color: var(--accent-brown) !important;">
                                    <i class="fas fa-image text-3xl mb-2"
                                        style="color: var(--accent-brown) !important;"></i>
                                    <p class="text-xs font-bold text-slate-500">UPLOAD PHOTO (demo ‚Äî not saved)</p>
                                    <input type="file" id="comp-image" accept="image/*" class="hidden">
                                    <img id="image-preview"
                                        class="hidden mt-3 max-h-20 mx-auto rounded-xl object-cover">
                                </div>

                                <button type="submit" id="btn-submit-report"
                                    class="w-full bg-slate-900 text-white font-black py-3 rounded-[1.4rem] shadow-lg hover:bg-blue-700 transition-all mt-2 text-sm">
                                    Submit Report
                                </button>
                            </form>
                        </div>
                    </div>

                    <!-- Map -->
                    <div
                        class="bg-white rounded-[2rem] shadow-xl border border-slate-100 overflow-hidden relative h-[340px] lg:h-[450px]">
                        <div
                            class="relative h-full w-full rounded-[2rem] overflow-hidden border-2 border-slate-800/70 shadow-lg">
                            <div
                                class="absolute top-4 left-4 z-10 bg-white/95 backdrop-blur px-4 py-2 rounded-lg border border-slate-300 text-sm font-bold text-slate-800">
                                üìç Drag marker to location
                            </div>
                            <div id="map" class="w-full h-full"></div>
                        </div>
                    </div>
                </div>

                <!-- Chart -->
                <div class="bg-white p-8 rounded-[2rem] shadow-xl border border-slate-100">
                    <h2 class="text-2xl font-black mb-8">Live Campus Stats</h2>
                    <div class="h-64"><canvas id="resolvedIssuesChart"></canvas></div>
                </div>
            </section>

            <!-- PROFILE -->
            <section id="profile-page" class="page-section">
                <div class="bg-white p-10 rounded-[2.5rem] shadow-2xl border max-w-4xl mx-auto">

                    <div class="bg-slate-900 text-white p-8 rounded-[2rem] mb-10 relative overflow-hidden"
                        style="background-color: var(--accent-brown) !important; background-image: url('https://www.transparenttextures.com/patterns/black-felt.png'); border: 4px double #2c1e1a;">
                        <div class="relative z-10 flex flex-col md:flex-row gap-8 items-center">
                            <div class="relative group cursor-pointer w-132 h-32">
                                <img id="profile-avatar-big"
                                    src="https://ui-avatars.com/api/?name=Aayush+Verma&background=5d4037&color=fff&bold=true&size=256"
                                    class="w-full h-full rounded-[1.4rem] border-4 border-blue-500 object-cover shadow-2xl">
                                <div id="avatar-badge"
                                    class="absolute -bottom-1 -right-1 bg-white p-2 rounded-full border-4 border-slate-900 shadow-xl z-50 flex items-center justify-center w-12 h-12 text-2xl">
                                    ü¶Ö
                                </div>
                            </div>
                            <div class="text-center md:text-left flex-1">
                                <h2 class="text-3xl font-black display-name" style="color: #f4ecd8 !important;">Aayush
                                    Verma</h2>
                                <p class="text-blue-400 font-bold tracking-widest text-xs uppercase mb-4"
                                    id="prof-reg-display" style="color: #ffb300 !important;">Reg: 2023BTECS00012</p>
                                <div class="flex gap-4 justify-center md:justify-start">
                                    <div class="bg-white/10 px-4 py-2 rounded-xl backdrop-blur-sm"
                                        style="border: 1px solid rgba(255,255,255,0.2);">
                                        <span class="block text-2xl font-black text-yellow-400" id="prof-karma"
                                            style="color: #ffb300 !important;">120</span>
                                        <span class="text-[10px] uppercase font-bold text-slate-400"
                                            style="color: #ccc !important;">Karma</span>
                                    </div>
                                    <div class="bg-white/10 px-4 py-2 rounded-xl backdrop-blur-sm"
                                        style="border: 1px solid rgba(255,255,255,0.2);">
                                        <span class="block text-2xl font-black text-blue-400" id="prof-reports"
                                            style="color: #fff !important;">12</span>
                                        <span class="text-[10px] uppercase font-bold text-slate-400"
                                            style="color: #ccc !important;">Reports</span>
                                    </div>
                                    <div class="bg-white/10 px-4 py-2 rounded-xl backdrop-blur-sm"
                                        style="border: 1px solid rgba(255,255,255,0.2);">
                                        <span class="block text-2xl font-black text-emerald-400" id="prof-badges-count"
                                            style="color: #4caf50 !important;">3</span>
                                        <span class="text-[10px] uppercase font-bold text-slate-400"
                                            style="color: #ccc !important;">Badges</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <form id="profile-edit-form">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold">Personal Details</h3>
                            <button type="submit" id="btn-save-profile"
                                class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-[1.4rem] font-bold text-sm shadow-lg transition">
                                Save Changes
                            </button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-2">
                                <label class="text-[10px] font-black text-slate-400 uppercase">Full Name
                                    (Locked)</label>
                                <input type="text" id="edit-name" disabled value="Aayush Verma"
                                    class="w-full px-5 py-3 bg-slate-100 border rounded-[1.1rem] font-bold text-slate-500 cursor-not-allowed">
                            </div>
                            <div class="space-y-2">
                                <label class="text-[10px] font-black text-slate-400 uppercase">Registration ID
                                    (Locked)</label>
                                <input type="text" id="edit-reg" disabled value="2023BTECS00012"
                                    class="w-full px-5 py-3 bg-slate-100 border rounded-[1.1rem] font-bold text-slate-500 cursor-not-allowed">
                            </div>
                            <div class="space-y-2">
                                <label class="text-[10px] font-black text-slate-400 uppercase">Branch</label>
                                <select id="edit-branch" class="w-full px-5 py-3 bg-white border rounded-[1.1rem]">
                                    <option value="">Select Branch</option>
                                    <option value="CSE" selected>CSE</option>
                                    <option value="ECE">ECE</option>
                                    <option value="EE">EE</option>
                                    <option value="ME">ME</option>
                                    <option value="CE">Civil</option>
                                </select>
                            </div>
                            <div class="space-y-2">
                                <label class="text-[10px] font-black text-slate-400 uppercase">Year</label>
                                <select id="edit-year" class="w-full px-5 py-3 bg-white border rounded-[1.1rem]">
                                    <option value="">Select Year</option>
                                    <option value="1">1st Year</option>
                                    <option value="2" selected>2nd Year</option>
                                    <option value="3">3rd Year</option>
                                    <option value="4">Final Year</option>
                                </select>
                            </div>
                            <div class="space-y-2">
                                <label class="text-[10px] font-black text-slate-400 uppercase">Gender</label>
                                <select id="edit-gender" class="w-full px-5 py-3 bg-white border rounded-[1.1rem]">
                                    <option value="">Select Gender</option>
                                    <option value="M" selected>Male</option>
                                    <option value="F">Female</option>
                                    <option value="Others">Others</option>
                                </select>
                            </div>
                            <div class="space-y-2">
                                <label class="text-[10px] font-black text-slate-400 uppercase">Mobile</label>
                                <input type="tel" id="edit-mobile" value="9876543210"
                                    class="w-full px-5 py-3 bg-white border rounded-[1.1rem]">
                            </div>
                        </div>
                    </form>

                    <h3 class="text-xl font-bold mt-10 mb-4">Badges Collection</h3>
                    <div id="badges-container"
                        class="flex flex-wrap gap-4 p-6 bg-slate-50 rounded-2xl border border-dashed border-slate-300">
                        <div
                            class="bg-yellow-100 border-2 border-yellow-600 text-yellow-800 px-4 py-2 rounded font-bold">
                            Early Reporter</div>
                        <div class="bg-green-100 border-2 border-green-600 text-green-800 px-4 py-2 rounded font-bold">
                            Helpful Voter</div>
                        <div
                            class="bg-purple-100 border-2 border-purple-600 text-purple-800 px-4 py-2 rounded font-bold">
                            Campus Scout</div>
                    </div>
                </div>
            </section>

            <!-- FEED -->
            <section id="feed-page" class="page-section">
                <div id="feed-container" class="space-y-6"></div>
            </section>

            <!-- REPOSTS -->
            <section id="reposts-page" class="page-section">
                <h2 class="text-2xl font-black mb-6 text-slate-800">My Reposted Issues</h2>
                <div id="reposts-container" class="space-y-6">
                    <p class="text-center py-10 text-slate-500">No reposts in demo mode</p>
                </div>
            </section>

            <!-- HISTORY -->
            <section id="history-page" class="page-section">
                <div id="history-container" class="space-y-4"></div>
            </section>

        </div>
    </main>

    <!-- SETTINGS MODAL -->
    <div id="settings-modal"
        class="fixed inset-0 bg-black/50 z-[100] hidden flex justify-center items-center backdrop-blur-sm">
        <div class="bg-white p-8 rounded-[2rem] shadow-2xl w-96 relative border border-slate-200">
            <button onclick="toggleSettingsModal()"
                class="absolute top-4 right-4 text-slate-400 hover:text-slate-600 transition-all hover:rotate-90">
                <i class="fas fa-times text-xl"></i>
            </button>
            <h2 class="text-2xl font-black mb-6">Settings</h2>
            <div class="space-y-6">
                <div class="flex items-center justify-between p-4 bg-slate-50 rounded-2xl border">
                    <div class="flex items-center gap-3">
                        <div class="bg-slate-200 p-2 rounded-lg text-slate-600"><i class="fas fa-moon"></i></div>
                        <span class="font-bold text-sm">Dark Mode</span>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="dark-mode-toggle" class="sr-only peer" onchange="toggleDarkMode()">
                        <div
                            class="w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600">
                        </div>
                    </label>
                </div>
                <p class="text-xs text-center text-slate-400 mt-4">Demo Version ‚Ä¢ Civic Connect</p>
            </div>
        </div>
    </div>

    <!-- Google Maps API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA45q-hu_MJph1n_0uuJd42G8QRT7bg8RI&callback=initMap"
        async defer></script>

    <script>
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        //  DEMO MOCK DATA
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        const mockUser = {
            fullName: "Aayush Verma",
            registrationId: "2023BTECS00012",
            branch: "CSE",
            year: 2,
            gender: "M",
            mobile_number: "9876543210",
            profile_pic_path: "https://ui-avatars.com/api/?name=Aayush+Verma&background=5d4037&color=fff&bold=true",
            report_count: 12,
            karma: 120
        };

        let currentLat = 25.4913;
        let currentLng = 81.8667;
        let map, marker;
        let issuesChart = null;

        const mockComplaints = [
            {
                complaint_id: 101,
                title: "Street light not working near main gate",
                category: "Infrastructure",
                description: "The light pole #17 has been non-functional for 10+ days.",
                image_path: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                fullName: "Rahul Sharma",
                profile_pic_path: "https://ui-avatars.com/api/?name=Rahul+Sharma",
                registered_at: "2025-12-29",
                upvotes: 18,
                downvotes: 2,
                repost_count: 7,
                status: "pending"
            },
            {
                complaint_id: 98,
                title: "Mess food quality declining rapidly",
                category: "Hostel",
                description: "Vegetables are not fresh, dal is watery since last week.",
                image_path: "https://images.unsplash.com/photo-1606857521015-7f9fcf423740?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                fullName: "Priya Singh",
                profile_pic_path: "https://ui-avatars.com/api/?name=Priya+Singh",
                registered_at: "2025-12-15",
                upvotes: 34,
                downvotes: 5,
                repost_count: 12,
                status: "in-progress"
            }
        ];

        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        //  INIT & UI UPDATE
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        document.addEventListener("DOMContentLoaded", () => {
            updateUI(mockUser);
            renderFeed();
            fetchChartData();
            checkNotifications();
        });

        function updateUI(profile) {
            document.querySelectorAll(".display-name").forEach(e => e.innerText = profile.fullName);
            document.getElementById("header-reg").innerText = `${profile.registrationId} ‚Ä¢ STUDENT`;
            document.getElementById("prof-reg-display").innerText = `Reg: ${profile.registrationId}`;

            const avatar = profile.profile_pic_path + "&size=128";
            document.querySelectorAll(".display-avatar").forEach(img => img.src = avatar);
            document.getElementById("header-avatar").src = avatar;
            document.getElementById("profile-avatar-big").src = avatar + "&size=256";

            const karma = profile.karma;
            document.getElementById("sidebar-points").innerText = karma;
            document.getElementById("prof-karma").innerText = karma;
            document.getElementById("prof-reports").innerText = profile.report_count;

            let level = "Rookie", badge = "üê£", progress = "15%";
            if (karma >= 50) { level = "Scout"; badge = "ü¶Ö"; progress = "45%"; }
            if (karma >= 150) { level = "Guardian"; badge = "üõ°Ô∏è"; progress = "80%"; }

            document.getElementById("sidebar-level").innerText = level;
            document.getElementById("sidebar-progress").style.width = progress;
            document.getElementById("avatar-badge").innerText = badge;
            document.getElementById("header-badge").innerText = badge;

            document.getElementById("edit-name").value = profile.fullName;
            document.getElementById("edit-reg").value = profile.registrationId;
            document.getElementById("edit-branch").value = profile.branch || "";
            document.getElementById("edit-year").value = profile.year || "";
            document.getElementById("edit-gender").value = profile.gender || "";
            document.getElementById("edit-mobile").value = profile.mobile_number || "";
        }

        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        //  PAGE SWITCHING
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        window.showPage = (pageId) => {
            document.querySelectorAll('.page-section').forEach(section => section.classList.remove('active'));
            const target = document.getElementById(pageId + '-page');
            if (target) target.classList.add('active');

            document.querySelectorAll('.nav-link').forEach(btn => btn.classList.remove('active'));
            const navBtn = document.getElementById('nav-' + pageId);
            if (navBtn) navBtn.classList.add('active');

            if (pageId === 'feed') renderFeed();
            if (pageId === 'dashboard') fetchChartData();
        };

        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        //  QUICK REPORT FORM
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        document.getElementById("complaintForm").onsubmit = (e) => {
            e.preventDefault();
            const title = document.getElementById("comp-title").value.trim();
            if (!title) return alert("Please enter a title");
            alert("Report submitted! (Demo mode ‚Äî not actually saved)");
            e.target.reset();
            document.getElementById("image-preview").classList.add("hidden");
        };

        document.getElementById('image-upload-area').onclick = () => document.getElementById('comp-image').click();
        document.getElementById('comp-image').onchange = (e) => {
            if (!e.target.files[0]) return;
            const reader = new FileReader();
            reader.onload = ev => {
                document.getElementById('image-preview').src = ev.target.result;
                document.getElementById('image-preview').classList.remove('hidden');
            };
            reader.readAsDataURL(e.target.files[0]);
        };

        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        //  FEED RENDERING
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function renderFeed() {
            const container = document.getElementById("feed-container");
            container.innerHTML = mockComplaints.map(r => {
                const score = (r.upvotes || 0) - (r.downvotes || 0);
                return `
                <div class="bg-white p-6 rounded-[2rem] border shadow-sm mb-6">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span class="bg-blue-100 text-blue-600 text-[10px] font-bold px-3 py-1 rounded-full uppercase">${r.category}</span>
                            <h3 class="text-lg font-bold mt-2">${r.title}</h3>
                        </div>
                        <span class="text-[10px] font-bold text-slate-400">${new Date(r.registered_at).toLocaleDateString()}</span>
                    </div>
                    <p class="text-sm text-slate-600 mb-3">${r.description}</p>
                    ${r.image_path ? `<img src="${r.image_path}" class="w-full h-56 object-cover rounded-2xl mb-4 border">` : ''}
                    <div class="flex justify-between items-center pt-2 border-t mt-2">
                        <div class="flex items-center gap-2">
                            <img src="${r.profile_pic_path}" class="w-8 h-8 rounded-full">
                            <span class="text-xs font-bold text-slate-500">${r.fullName}</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="flex items-center bg-slate-100 rounded-xl border">
                                <button class="px-3 py-2 hover:text-blue-600"><i class="fas fa-arrow-up"></i></button>
                                <span class="text-xs font-bold">${score}</span>
                                <button class="px-3 py-2 hover:text-red-600"><i class="fas fa-arrow-down"></i></button>
                                <div class="w-px h-4 bg-slate-300 mx-1"></div>
                                <button class="px-3 py-2 flex items-center gap-1">
                                    <i class="fas fa-retweet"></i> <span class="text-xs">${r.repost_count || 0}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>`;
            }).join("");
        }

        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        //  CHART
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function fetchChartData() {
            const ctx = document.getElementById('resolvedIssuesChart').getContext('2d');
            const counts = { Hostel: 14, Academic: 9, Infrastructure: 22, Cleanliness: 17 };

            if (issuesChart) issuesChart.destroy();
            issuesChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(counts),
                    datasets: [{
                        data: Object.values(counts),
                        backgroundColor: ['#3b82f6', '#8b5cf6', '#f59e0b', '#10b981'],
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        //  GOOGLE MAPS
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        window.initMap = () => {
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 16,
                center: { lat: currentLat, lng: currentLng },
                mapTypeId: 'roadmap',
                zoomControl: true,
                mapTypeControl: false,
                streetViewControl: false,
                fullscreenControl: false
            });

            marker = new google.maps.Marker({
                position: { lat: currentLat, lng: currentLng },
                map: map,
                draggable: true,
                animation: google.maps.Animation.DROP
            });

            marker.addListener("dragend", (e) => {
                currentLat = e.latLng.lat();
                currentLng = e.latLng.lng();
                console.log(`Location: ${currentLat}, ${currentLng}`);
            });
        };

        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        //  TOGGLES & HELPERS
        // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        window.toggleNotifications = () => {
            document.getElementById("notif-menu").classList.toggle("hidden");
            document.getElementById("notif-dot").classList.add("hidden");
        };

        window.toggleProfileMenu = () => document.getElementById('profile-menu').classList.toggle('hidden');
        window.toggleSettingsModal = () => document.getElementById('settings-modal').classList.toggle('hidden');

        window.toggleDarkMode = () => {
            const isDark = document.getElementById('dark-mode-toggle').checked;
            document.body.classList.toggle('dark', isDark);
        };

        function checkNotifications() {
            document.getElementById("notif-dot").classList.add("hidden");
        }

        document.getElementById("profile-edit-form").onsubmit = (e) => {
            e.preventDefault();
            alert("Profile changes saved! (Demo ‚Äî not persisted)");
        };
    </script>
</body>

</html>